{"version":3,"file":"commonHelpers.js","sources":["../src/js/helpers.js","../src/js/pixabayApi.js","../src/js/markup.js","../src/js/refs.js","../src/index.js"],"sourcesContent":["import iziToast from 'izitoast';\n\nexport const scrollPage = () => {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n};\n\nexport const showElement = (element, isVisible) => element.classList.toggle('hidden', !isVisible);\n\n\nexport const showError = () => iziToast.error({\n  title: 'Oops!',\n  message: 'Something went wrong try again',\n  position: 'topRight',\n});","import axios from 'axios';\nimport { showError } from './helpers.js';\n\nconst URL = 'https://pixabay.com/api/';\n\nexport const getImage = async (query, page) => {\n  const { data } = await axios.get(URL, {\n    params: {\n      key: '40865499-984f6d4bf951e94a81d50a698',\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      per_page: '40',\n      page: page,\n    },\n  });\n  return data;\n};","export const createMarkup = (data) => {\n  return data\n    .map(\n      ({\n         webformatURL,\n         largeImageURL,\n         tags,\n         likes,\n         views,\n         comments,\n         downloads,\n       }) => `\n    <a href='${largeImageURL}' class='card-link js-card-link'>\n     <div class='photo-card'>\n      <img src='${webformatURL}' class='card-img'  alt='${tags}' loading='lazy' />\n       <div class='info'>\n        <p class='info-item'>\n            <b>Likes: ${likes}</b>\n        </p>\n        <p class='info-item'>\n        <b>Views: ${views}</b>\n        </p>\n        <p class='info-item'>\n            <b>Comments: ${comments}</b>\n        </p>\n        <p class='info-item'>\n            <b>Downloads: ${downloads}</b>\n        </p>\n    </div>\n</div>\n</a>`,\n    )\n    .join('');\n};","export const refs = {\n  form: document.querySelector('#search-form'),\n  input: document.querySelector('input'),\n  gallery: document.querySelector('.gallery'),\n  loadBtn: document.querySelector('.js-load-btn'),\n  logo: document.querySelector('.js-pixa'),\n};","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getImage } from './js/pixabayApi.js';\nimport { createMarkup } from './js/markup.js';\nimport { refs } from './js/refs.js';\nimport { scrollPage, showElement, showError } from './js/helpers.js';\n\nlet currentQuery = '';\nlet page = 1;\nconst clearPage = () => {\n  refs.gallery.innerHTML = '';\n  page = 1;\n};\n\nconst handleSearch = async (e) => {\n  e.preventDefault();\n\n  const query = refs.input.value.trim().toLowerCase();\n\n  if (!query) {\n    iziToast.warning({\n      title: 'Ops!',\n      message: 'Enter something to search!',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  if (currentQuery === query) {\n    iziToast.warning({\n      title: 'Sorry!',\n      message: 'Rewrite your requests, write something different.!',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  currentQuery = query;\n\n  clearPage();\n\n  try {\n    showElement(refs.loadBtn, false);\n    const { totalHits, hits } = await getImage(currentQuery, page);\n\n\n    if (totalHits === 0) {\n      showElement(refs.loadBtn, false);\n      showElement(refs.logo, true);\n      iziToast.show({\n        title: 'Ops!',\n        message: 'Sorry, there are no images matching your search query. Please try again.',\n        position: 'topRight',\n      });\n      return;\n    }\n\n    showElement(refs.logo, false);\n\n    refs.gallery.insertAdjacentHTML('afterbegin', createMarkup(hits));\n\n    iziToast.show({\n      title: 'Hooray!',\n      message: `We found ${totalHits} images.`,\n      position: 'topRight',\n    });\n    onImages.refresh();\n\n    if (Math.ceil(totalHits / 40) === page) {\n      showElement(refs.loadBtn, false);\n      iziToast.show({\n        title: 'Ops!',\n        message: 'We\\'re sorry, but you\\'ve reached the end of search results.',\n        position: 'topRight',\n      });\n      return;\n    }\n\n    showElement(refs.loadBtn, true);\n\n  } catch (err) {\n    console.log(err);\n    showError();\n    clearPage();\n    showElement(refs.logo, true);\n  }\n};\n\nconst handleLoadMore = async (e) => {\n  e.preventDefault();\n\n  page += 1;\n\n  try {\n    const { hits, totalHits } = await getImage(currentQuery, page);\n\n    if (Math.ceil(totalHits / 40) === page) {\n      showElement(refs.loadBtn, false);\n      iziToast.show({\n        title: 'Ops!',\n        message: 'We\\'re sorry, but you\\'ve reached the end of search results.',\n        position: 'topRight',\n      });\n    }\n\n    refs.gallery.insertAdjacentHTML('beforeend', createMarkup(hits));\n    scrollPage();\n    onImages.refresh();\n  } catch (err) {\n    console.log(err);\n    showError();\n    clearPage();\n    showElement(refs.logo, true);\n  }\n};\n\n\nrefs.form.addEventListener('submit', handleSearch);\nrefs.loadBtn.addEventListener('click', handleLoadMore);\n\nshowElement(refs.loadBtn, false);\nshowElement(refs.logo, true);\n\nconst onImages = new SimpleLightbox('.js-gallery a', {\n  captionDelay: 250,\n  captionsData: 'alt',\n});\n\n\n\n\n"],"names":["scrollPage","cardHeight","showElement","element","isVisible","showError","iziToast","URL","getImage","query","page","data","axios","createMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","refs","currentQuery","clearPage","handleSearch","e","totalHits","hits","onImages","err","handleLoadMore","SimpleLightbox"],"mappings":"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"}